;
; PlatformIO Configuration for SDIO WAV Player
; Board: Pimoroni Pico Plus 2 (RP2350B)
; Framework: Arduino (arduino-pico)
;

[env:pimoroni_pico_plus_2]
platform = raspberrypi
board = rpipico2
framework = arduino

; Board configuration
board_build.core = earlephilhower
board_build.filesystem_size = 0.5m
board_build.f_cpu = 150000000L
board_build.f_flash = 133000000L

; Upload configuration
upload_protocol = picotool
upload_port = /dev/cu.usbmodem*

; Monitor configuration
monitor_speed = 115200
monitor_filters =
    colorize
    time

; Build flags
build_flags =
    -D ARDUINO_ARCH_RP2040
    -D PICO_BOARD=pimoroni_pico_plus_2
    -D PICO_RP2350=1
    -D PICO_RP2350B=1
    -D LIB_PICO_PLATFORM=rp2350
    -D LIB_PICO_PLATFORM_RP2350=1
    -D PICO_FLASH_SIZE_BYTES=16777216
    -D PICO_PSRAM_SIZE=8388608
    -D USE_TINYUSB
    -Os
    -Wall

; Library dependencies
lib_deps =
    adafruit/Adafruit TinyUSB Library @ ^3.1.0

; Extra scripts (optional)
; extra_scripts =
;     pre:scripts/pre_build.py

; Advanced options
lib_ldf_mode = chain+
lib_compat_mode = strict

; Debug configuration (optional)
debug_tool = cmsis-dap
debug_init_break = tbreak setup

[env:pimoroni_pico_plus_2_debug]
extends = env:pimoroni_pico_plus_2
build_type = debug
build_flags =
    ${env:pimoroni_pico_plus_2.build_flags}
    -DDEBUG=1
    -DDEBUG_RP2040_PORT=Serial
    -g
    -Og
monitor_filters =
    colorize
    time
    log2file
